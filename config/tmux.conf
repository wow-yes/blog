set -g default-terminal tmux-256color
set-option -ga terminal-overrides ",*256col*:Tc" 

#set -g mouse on # 开启鼠标支持
set -g renumber-windows on # 自动重新编号窗口，避免窗口关闭后留下序号空洞
set -g escape-time 10 # 设置更新延迟，提升响应速度（单位毫秒）
set -g aggressive-resize on # 监听终端尺寸变化，适应动态调整

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# 优化鼠标滚轮：逐行滚动，避免翻页
#bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"

set -g status-interval 15 # 状态栏刷新频率 (1秒)
set -g status-position bottom # 状态栏位置

# 状态栏基础
set -g status-style "bg=#282828,fg=#ebdbb2"

# 左侧：Session名称
set -g status-left-length 101
set -g status-left "#[fg=#83a598,bg=#282828,bold]❐ #S #[fg=#282828,bg=#3c3836,nobold]"

# 窗口列表
setw -g window-status-format "#[fg=#7c6f64,bg=#3c3836] #I:#W "
setw -g window-status-current-format "#[fg=#282828,bg=#b8bb26,bold] #I:#W #[fg=#b8bb26,bg=#3c3836,nobold]"
setw -g window-status-separator ""

# 右侧
set -g status-right-length 150
COL="#[fg=#ebdbb2,bg=#3c3836]|#[fg=#ebdbb2,bg=#3c3836]"
set -g status-right "$COL#(uptime | awk -F'load average:' '{print $2}') $COL #(free -h | awk '/^Mem/ {print $3\"/\"$2}') $COL #(df -h / | awk 'NR==2 {print $5 \" \" $4}') $COL %y-%m-%d %H:%M"

set -g display-panes-time 1000 # 在慢速网络上禁用实时更新
set -g lock-after-time 0
set -g repeat-time 500 # 限制输出，防止卡死

setw -g mode-keys vi
